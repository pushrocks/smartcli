/// <reference path="../ts/typings/main.d.ts" />
var smartcli = require("../dist/index.js");
var should = req;
/* ------------------------------------------------------------------ *
 * ------------------- CHECKS TESTS --------------------------------- *
 * ------------------------------------------------------------------ */
describe("smartcli", function () {
    describe(".check", function () {
        describe(".command", function () {
            it("should return true when specified command is found", function () {
                smartcli.check.command("jazz").should.be.true();
            });
            it("should return false when specified command is NOT found", function () {
                smartcli.check.command("rock").should.be.false();
            });
        });
        describe(".commandPresence", function () {
        });
    });
});
var checkCommandArgumentTest = function () {
    if (smartcli.check.commandArgument("jam", 1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgument("session", 2)) {
        beautylog.success('There is no level 2 argument with the name of "session"! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument with the name of "session"! This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentTest();
var checkCommandArgumentPresenceTest = function () {
    if (smartcli.check.commandArgumentPresence(1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgumentPresence(2)) {
        beautylog.success('There is no level 2 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument... This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentPresenceTest();
/* ------------------------------------------------------------------ *
 * ------------------- GETTERS TESTS -------------------------------- *
 * ------------------------------------------------------------------ */
var getCommandTest = function () {
    var cliCommand = smartcli.get.command();
    if (cliCommand.name == "jazz") {
        beautylog.success('The specified command name is "jazz". Perfect!');
    }
    else {
        beautylog.error('The specified command name is not "jazz". Something is wrong!');
        process.exit(1);
    }
};
getCommandTest();
var getCommandArgumentTest = function () {
    var cliArgument = smartcli.get.commandArgument(1);
    var cliArgument2 = smartcli.get.commandArgument(2);
    if (cliArgument.name == "jam") {
        beautylog.success('The first specified command argument name is "jam". Perfect!');
    }
    else {
        beautylog.error('The first specified command argument name is not "jam". Something is wrong!');
        process.exit(1);
    }
    if (cliArgument2.name == "undefined") {
        beautylog.success('The second specified command argument name is "undefined". Perfect!');
    }
    else {
        beautylog.error('The second specified command argument name is not "undefined". Something is wrong!');
        process.exit(1);
    }
};
getCommandArgumentTest();
var getCommandArgsTest = function () {
    var commandArgs = smartcli.get.commandArgs();
    if (commandArgs[0].name == "jam") {
        beautylog.success("first command argument is 'jam'. Perfect!");
    }
    else {
        beautylog.error("first command argument is not 'jam'. Something is wromg!");
        console.log(commandArgs[0].name);
        process.exit(1);
    }
};
getCommandArgsTest();
var getOptionTest = function () {
    var cliOption = smartcli.get.option("awesome");
    var cliOption2 = smartcli.get.option("terrific");
    if (cliOption.specified) {
        beautylog.success("awesome is specified. Perfect!");
    }
    else {
        beautylog.error("awesome is not specified. Somehthing is wrong");
        process.exit(1);
    }
    if (!cliOption2.specified) {
        beautylog.success("terrific is not specified. Perfect!");
    }
    else {
        beautylog.error("terrific is specified. Somehthing is wrong");
        process.exit(1);
    }
};
getOptionTest();
var getCwdTest = function () {
    beautylog.info('The current directory is: ' + smartcli.get.cwd().path);
};
getCwdTest();
/* ------------------------------------------------------------------ *
 * ------------------- INTERACTION TESTS ---------------------------- *
 * ------------------------------------------------------------------ */
var interactionGetAnswerTest = function () {
    smartcli.interaction.getAnswer('How do you feel?', function (answer) {
        console.log('The answer is: ' + answer);
        interactionGetChoiceTest();
    });
};
var interactionGetChoiceTest = function () {
    smartcli.interaction.getChoice('What music do you like to hear?', ['Jazz', 'Blues', 'Classical'], function (answer) {
        console.log('The answer is: ' + answer);
        endTests();
    });
};
var endTests = function () {
    beautylog.ok("No more tests!");
    beautylog.success("Tests completed successfully!");
};
if (!smartcli.check.option("silent")) {
    interactionGetAnswerTest();
}
else {
    beautylog.info("--silent option is specified, thus we are not running interaction tests.");
    endTests();
}
;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LENBQUM7QUFFRixFQUFFLENBQUEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUEsQ0FBQztJQUNqQyx3QkFBd0IsRUFBRSxDQUFDO0FBQy9CLENBQUM7QUFBQyxJQUFJLENBQUMsQ0FBQztJQUNKLFNBQVMsQ0FBQyxJQUFJLENBQUMsMEVBQTBFLENBQUMsQ0FBQztJQUMzRixRQUFRLEVBQUUsQ0FBQztBQUNmLENBQUM7QUFBQSxDQUFDIiwiZmlsZSI6InRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHMvdHlwaW5ncy9tYWluLmQudHNcIiAvPlxubGV0IHNtYXJ0Y2xpID0gcmVxdWlyZShcIi4uL2Rpc3QvaW5kZXguanNcIik7XG5sZXQgc2hvdWxkID0gcmVxXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tIENIRUNLUyBURVNUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmRlc2NyaWJlKFwic21hcnRjbGlcIixmdW5jdGlvbigpe1xuICAgIGRlc2NyaWJlKFwiLmNoZWNrXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgZGVzY3JpYmUoXCIuY29tbWFuZFwiLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHNwZWNpZmllZCBjb21tYW5kIGlzIGZvdW5kXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBzbWFydGNsaS5jaGVjay5jb21tYW5kKFwiamF6elwiKS5zaG91bGQuYmUudHJ1ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBzcGVjaWZpZWQgY29tbWFuZCBpcyBOT1QgZm91bmRcIixmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmQoXCJyb2NrXCIpLnNob3VsZC5iZS5mYWxzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyBcbiAgICAgICAgZGVzY3JpYmUoXCIuY29tbWFuZFByZXNlbmNlXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG5cblxuXG52YXIgY2hlY2tDb21tYW5kQXJndW1lbnRUZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudChcImphbVwiLDEpKSB7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGVyZSBpcyBhIGxldmVsIDEgYXJndW1lbnQhIFBlcmZlY3QhJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGVyZSBzZWVtcyB0byBiZSBubyBsZXZlbCAxIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICBpZiAoIXNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudChcInNlc3Npb25cIiwyKSkge1xuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlcmUgaXMgbm8gbGV2ZWwgMiBhcmd1bWVudCB3aXRoIHRoZSBuYW1lIG9mIFwic2Vzc2lvblwiISBQZXJmZWN0IScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlcmUgc2VlbXMgdG8gYmUgYSBsZXZlbCAyIGFyZ3VtZW50IHdpdGggdGhlIG5hbWUgb2YgXCJzZXNzaW9uXCIhIFRoaXMgaXMgd3JvbmcnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn07XG5jaGVja0NvbW1hbmRBcmd1bWVudFRlc3QoKTtcblxudmFyIGNoZWNrQ29tbWFuZEFyZ3VtZW50UHJlc2VuY2VUZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudFByZXNlbmNlKDEpKSB7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGVyZSBpcyBhIGxldmVsIDEgYXJndW1lbnQhIFBlcmZlY3QhJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGVyZSBzZWVtcyB0byBiZSBubyBsZXZlbCAxIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICBpZiAoIXNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudFByZXNlbmNlKDIpKSB7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGVyZSBpcyBubyBsZXZlbCAyIGFyZ3VtZW50ISBQZXJmZWN0IScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlcmUgc2VlbXMgdG8gYmUgYSBsZXZlbCAyIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn07XG5jaGVja0NvbW1hbmRBcmd1bWVudFByZXNlbmNlVGVzdCgpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLSBHRVRURVJTIFRFU1RTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGdldENvbW1hbmRUZXN0ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgY2xpQ29tbWFuZCA9IHNtYXJ0Y2xpLmdldC5jb21tYW5kKCk7XG4gICAgaWYoY2xpQ29tbWFuZC5uYW1lID09IFwiamF6elwiKSB7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGUgc3BlY2lmaWVkIGNvbW1hbmQgbmFtZSBpcyBcImphenpcIi4gUGVyZmVjdCEnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZSBzcGVjaWZpZWQgY29tbWFuZCBuYW1lIGlzIG5vdCBcImphenpcIi4gU29tZXRoaW5nIGlzIHdyb25nIScpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG59O1xuZ2V0Q29tbWFuZFRlc3QoKTtcblxudmFyIGdldENvbW1hbmRBcmd1bWVudFRlc3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xpQXJndW1lbnQgPSBzbWFydGNsaS5nZXQuY29tbWFuZEFyZ3VtZW50KDEpO1xuICAgIHZhciBjbGlBcmd1bWVudDIgPSBzbWFydGNsaS5nZXQuY29tbWFuZEFyZ3VtZW50KDIpO1xuICAgIGlmKGNsaUFyZ3VtZW50Lm5hbWUgPT0gXCJqYW1cIikge1xuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlIGZpcnN0IHNwZWNpZmllZCBjb21tYW5kIGFyZ3VtZW50IG5hbWUgaXMgXCJqYW1cIi4gUGVyZmVjdCEnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZSBmaXJzdCBzcGVjaWZpZWQgY29tbWFuZCBhcmd1bWVudCBuYW1lIGlzIG5vdCBcImphbVwiLiBTb21ldGhpbmcgaXMgd3JvbmchJyk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICBpZihjbGlBcmd1bWVudDIubmFtZSA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGUgc2Vjb25kIHNwZWNpZmllZCBjb21tYW5kIGFyZ3VtZW50IG5hbWUgaXMgXCJ1bmRlZmluZWRcIi4gUGVyZmVjdCEnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZSBzZWNvbmQgc3BlY2lmaWVkIGNvbW1hbmQgYXJndW1lbnQgbmFtZSBpcyBub3QgXCJ1bmRlZmluZWRcIi4gU29tZXRoaW5nIGlzIHdyb25nIScpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxufTtcbmdldENvbW1hbmRBcmd1bWVudFRlc3QoKTtcblxudmFyIGdldENvbW1hbmRBcmdzVGVzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb21tYW5kQXJncyA9IHNtYXJ0Y2xpLmdldC5jb21tYW5kQXJncygpO1xuICAgIGlmKGNvbW1hbmRBcmdzWzBdLm5hbWUgPT0gXCJqYW1cIikge1xuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcyhcImZpcnN0IGNvbW1hbmQgYXJndW1lbnQgaXMgJ2phbScuIFBlcmZlY3QhXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcihcImZpcnN0IGNvbW1hbmQgYXJndW1lbnQgaXMgbm90ICdqYW0nLiBTb21ldGhpbmcgaXMgd3JvbWchXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhjb21tYW5kQXJnc1swXS5uYW1lKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn07XG5nZXRDb21tYW5kQXJnc1Rlc3QoKTtcblxudmFyIGdldE9wdGlvblRlc3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xpT3B0aW9uID0gc21hcnRjbGkuZ2V0Lm9wdGlvbihcImF3ZXNvbWVcIik7XG4gICAgdmFyIGNsaU9wdGlvbjIgPSBzbWFydGNsaS5nZXQub3B0aW9uKFwidGVycmlmaWNcIik7XG4gICAgaWYoY2xpT3B0aW9uLnNwZWNpZmllZCl7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKFwiYXdlc29tZSBpcyBzcGVjaWZpZWQuIFBlcmZlY3QhXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKFwiYXdlc29tZSBpcyBub3Qgc3BlY2lmaWVkLiBTb21laHRoaW5nIGlzIHdyb25nXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICAgIGlmKCFjbGlPcHRpb24yLnNwZWNpZmllZCl7XG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKFwidGVycmlmaWMgaXMgbm90IHNwZWNpZmllZC4gUGVyZmVjdCFcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoXCJ0ZXJyaWZpYyBpcyBzcGVjaWZpZWQuIFNvbWVodGhpbmcgaXMgd3JvbmdcIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG59O1xuZ2V0T3B0aW9uVGVzdCgpO1xuXG52YXIgZ2V0Q3dkVGVzdCA9IGZ1bmN0aW9uKCl7XG4gICAgYmVhdXR5bG9nLmluZm8oJ1RoZSBjdXJyZW50IGRpcmVjdG9yeSBpczogJyArIHNtYXJ0Y2xpLmdldC5jd2QoKS5wYXRoKTtcbn07XG5nZXRDd2RUZXN0KCk7XG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0gSU5URVJBQ1RJT04gVEVTVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXG52YXIgaW50ZXJhY3Rpb25HZXRBbnN3ZXJUZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgc21hcnRjbGkuaW50ZXJhY3Rpb24uZ2V0QW5zd2VyKCdIb3cgZG8geW91IGZlZWw/JyxmdW5jdGlvbihhbnN3ZXIpe1xuICAgICAgICBjb25zb2xlLmxvZygnVGhlIGFuc3dlciBpczogJyArIGFuc3dlcik7XG4gICAgICAgIGludGVyYWN0aW9uR2V0Q2hvaWNlVGVzdCgpO1xuICAgIH0pO1xufTtcblxuXG5cbnZhciBpbnRlcmFjdGlvbkdldENob2ljZVRlc3QgPSBmdW5jdGlvbigpIHtcbiAgICBzbWFydGNsaS5pbnRlcmFjdGlvbi5nZXRDaG9pY2UoJ1doYXQgbXVzaWMgZG8geW91IGxpa2UgdG8gaGVhcj8nLFsnSmF6eicsJ0JsdWVzJywnQ2xhc3NpY2FsJ10sZnVuY3Rpb24oYW5zd2VyKXtcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZSBhbnN3ZXIgaXM6ICcgKyBhbnN3ZXIpO1xuICAgICAgICBlbmRUZXN0cygpO1xuICAgIH0pO1xufTtcblxudmFyIGVuZFRlc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgYmVhdXR5bG9nLm9rKFwiTm8gbW9yZSB0ZXN0cyFcIik7XG4gICAgYmVhdXR5bG9nLnN1Y2Nlc3MoXCJUZXN0cyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbn07XG5cbmlmKCFzbWFydGNsaS5jaGVjay5vcHRpb24oXCJzaWxlbnRcIikpe1xuICAgIGludGVyYWN0aW9uR2V0QW5zd2VyVGVzdCgpO1xufSBlbHNlIHtcbiAgICBiZWF1dHlsb2cuaW5mbyhcIi0tc2lsZW50IG9wdGlvbiBpcyBzcGVjaWZpZWQsIHRodXMgd2UgYXJlIG5vdCBydW5uaW5nIGludGVyYWN0aW9uIHRlc3RzLlwiKTtcbiAgICBlbmRUZXN0cygpO1xufTtcblxuXG5cbiJdfQ==
