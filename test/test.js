/// <reference path="../ts/typings/main.d.ts" />
var smartcli = require("../dist/index.js");
var beautylog = require("beautylog");
var should = require("should");
/* ------------------------------------------------------------------ *
 * ------------------- CHECKS TESTS --------------------------------- *
 * ------------------------------------------------------------------ */
describe("smartcli", function () {
    describe(".check", function () {
        describe(".command", function () {
            it("should return true when specified command is found", function () {
                smartcli.check.command("jazz").should.be.true();
            });
            it("should return false when specified command is NOT found", function () {
                smartcli.check.command("rock").should.be.false();
            });
        });
        describe(".commandPresence", function () {
        });
    });
});
var checkCommandArgumentTest = function () {
    if (smartcli.check.commandArgument("jam", 1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgument("session", 2)) {
        beautylog.success('There is no level 2 argument with the name of "session"! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument with the name of "session"! This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentTest();
var checkCommandArgumentPresenceTest = function () {
    if (smartcli.check.commandArgumentPresence(1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgumentPresence(2)) {
        beautylog.success('There is no level 2 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument... This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentPresenceTest();
/* ------------------------------------------------------------------ *
 * ------------------- GETTERS TESTS -------------------------------- *
 * ------------------------------------------------------------------ */
var getCommandTest = function () {
    var cliCommand = smartcli.get.command();
    if (cliCommand.name == "jazz") {
        beautylog.success('The specified command name is "jazz". Perfect!');
    }
    else {
        beautylog.error('The specified command name is not "jazz". Something is wrong!');
        process.exit(1);
    }
};
getCommandTest();
var getCommandArgumentTest = function () {
    var cliArgument = smartcli.get.commandArgument(1);
    var cliArgument2 = smartcli.get.commandArgument(2);
    if (cliArgument.name == "jam") {
        beautylog.success('The first specified command argument name is "jam". Perfect!');
    }
    else {
        beautylog.error('The first specified command argument name is not "jam". Something is wrong!');
        process.exit(1);
    }
    if (cliArgument2.name == "undefined") {
        beautylog.success('The second specified command argument name is "undefined". Perfect!');
    }
    else {
        beautylog.error('The second specified command argument name is not "undefined". Something is wrong!');
        process.exit(1);
    }
};
getCommandArgumentTest();
var getCommandArgsTest = function () {
    var commandArgs = smartcli.get.commandArgs();
    if (commandArgs[0].name == "jam") {
        beautylog.success("first command argument is 'jam'. Perfect!");
    }
    else {
        beautylog.error("first command argument is not 'jam'. Something is wromg!");
        console.log(commandArgs[0].name);
        process.exit(1);
    }
};
getCommandArgsTest();
var getOptionTest = function () {
    var cliOption = smartcli.get.option("awesome");
    var cliOption2 = smartcli.get.option("terrific");
    if (cliOption.specified) {
        beautylog.success("awesome is specified. Perfect!");
    }
    else {
        beautylog.error("awesome is not specified. Somehthing is wrong");
        process.exit(1);
    }
    if (!cliOption2.specified) {
        beautylog.success("terrific is not specified. Perfect!");
    }
    else {
        beautylog.error("terrific is specified. Somehthing is wrong");
        process.exit(1);
    }
};
getOptionTest();
var getCwdTest = function () {
    beautylog.info('The current directory is: ' + smartcli.get.cwd().path);
};
getCwdTest();
/* ------------------------------------------------------------------ *
 * ------------------- INTERACTION TESTS ---------------------------- *
 * ------------------------------------------------------------------ */
var interactionGetAnswerTest = function () {
    smartcli.interaction.getAnswer('How do you feel?', function (answer) {
        console.log('The answer is: ' + answer);
        interactionGetChoiceTest();
    });
};
var interactionGetChoiceTest = function () {
    smartcli.interaction.getChoice('What music do you like to hear?', ['Jazz', 'Blues', 'Classical'], function (answer) {
        console.log('The answer is: ' + answer);
        endTests();
    });
};
var endTests = function () {
    beautylog.ok("No more tests!");
    beautylog.success("Tests completed successfully!");
};
if (!smartcli.check.option("silent")) {
    interactionGetAnswerTest();
}
else {
    beautylog.info("--silent option is specified, thus we are not running interaction tests.");
    endTests();
}
;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUMsQ0FBQztJQUMvQixTQUFTLENBQUMsT0FBTyxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDdkQsQ0FBQyxDQUFDO0FBRUYsRUFBRSxDQUFBLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBLENBQUM7SUFDakMsd0JBQXdCLEVBQUUsQ0FBQztBQUMvQixDQUFDO0FBQUMsSUFBSSxDQUFDLENBQUM7SUFDSixTQUFTLENBQUMsSUFBSSxDQUFDLDBFQUEwRSxDQUFDLENBQUM7SUFDM0YsUUFBUSxFQUFFLENBQUM7QUFDZixDQUFDO0FBQUEsQ0FBQyIsImZpbGUiOiJ0ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3RzL3R5cGluZ3MvbWFpbi5kLnRzXCIgLz5cclxubGV0IHNtYXJ0Y2xpID0gcmVxdWlyZShcIi4uL2Rpc3QvaW5kZXguanNcIik7XHJcbmxldCBiZWF1dHlsb2cgPSByZXF1aXJlKFwiYmVhdXR5bG9nXCIpO1xyXG5sZXQgc2hvdWxkID0gcmVxdWlyZShcInNob3VsZFwiKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0gQ0hFQ0tTIFRFU1RTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZGVzY3JpYmUoXCJzbWFydGNsaVwiLGZ1bmN0aW9uKCl7XHJcbiAgICBkZXNjcmliZShcIi5jaGVja1wiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgZGVzY3JpYmUoXCIuY29tbWFuZFwiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0cnVlIHdoZW4gc3BlY2lmaWVkIGNvbW1hbmQgaXMgZm91bmRcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgc21hcnRjbGkuY2hlY2suY29tbWFuZChcImphenpcIikuc2hvdWxkLmJlLnRydWUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIHNwZWNpZmllZCBjb21tYW5kIGlzIE5PVCBmb3VuZFwiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBzbWFydGNsaS5jaGVjay5jb21tYW5kKFwicm9ja1wiKS5zaG91bGQuYmUuZmFsc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IFxyXG4gICAgICAgIGRlc2NyaWJlKFwiLmNvbW1hbmRQcmVzZW5jZVwiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxudmFyIGNoZWNrQ29tbWFuZEFyZ3VtZW50VGVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudChcImphbVwiLDEpKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoJ1RoZXJlIGlzIGEgbGV2ZWwgMSBhcmd1bWVudCEgUGVyZmVjdCEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGVyZSBzZWVtcyB0byBiZSBubyBsZXZlbCAxIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudChcInNlc3Npb25cIiwyKSkge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGVyZSBpcyBubyBsZXZlbCAyIGFyZ3VtZW50IHdpdGggdGhlIG5hbWUgb2YgXCJzZXNzaW9uXCIhIFBlcmZlY3QhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlcmUgc2VlbXMgdG8gYmUgYSBsZXZlbCAyIGFyZ3VtZW50IHdpdGggdGhlIG5hbWUgb2YgXCJzZXNzaW9uXCIhIFRoaXMgaXMgd3JvbmcnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbn07XHJcbmNoZWNrQ29tbWFuZEFyZ3VtZW50VGVzdCgpO1xyXG5cclxudmFyIGNoZWNrQ29tbWFuZEFyZ3VtZW50UHJlc2VuY2VUZXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoc21hcnRjbGkuY2hlY2suY29tbWFuZEFyZ3VtZW50UHJlc2VuY2UoMSkpIHtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlcmUgaXMgYSBsZXZlbCAxIGFyZ3VtZW50ISBQZXJmZWN0IScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZXJlIHNlZW1zIHRvIGJlIG5vIGxldmVsIDEgYXJndW1lbnQuLi4gVGhpcyBpcyB3cm9uZycpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxuICAgIGlmICghc21hcnRjbGkuY2hlY2suY29tbWFuZEFyZ3VtZW50UHJlc2VuY2UoMikpIHtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlcmUgaXMgbm8gbGV2ZWwgMiBhcmd1bWVudCEgUGVyZmVjdCEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGVyZSBzZWVtcyB0byBiZSBhIGxldmVsIDIgYXJndW1lbnQuLi4gVGhpcyBpcyB3cm9uZycpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxufTtcclxuY2hlY2tDb21tYW5kQXJndW1lbnRQcmVzZW5jZVRlc3QoKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0gR0VUVEVSUyBURVNUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgZ2V0Q29tbWFuZFRlc3QgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGNsaUNvbW1hbmQgPSBzbWFydGNsaS5nZXQuY29tbWFuZCgpO1xyXG4gICAgaWYoY2xpQ29tbWFuZC5uYW1lID09IFwiamF6elwiKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoJ1RoZSBzcGVjaWZpZWQgY29tbWFuZCBuYW1lIGlzIFwiamF6elwiLiBQZXJmZWN0IScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZSBzcGVjaWZpZWQgY29tbWFuZCBuYW1lIGlzIG5vdCBcImphenpcIi4gU29tZXRoaW5nIGlzIHdyb25nIScpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxuXHJcbn07XHJcbmdldENvbW1hbmRUZXN0KCk7XHJcblxyXG52YXIgZ2V0Q29tbWFuZEFyZ3VtZW50VGVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNsaUFyZ3VtZW50ID0gc21hcnRjbGkuZ2V0LmNvbW1hbmRBcmd1bWVudCgxKTtcclxuICAgIHZhciBjbGlBcmd1bWVudDIgPSBzbWFydGNsaS5nZXQuY29tbWFuZEFyZ3VtZW50KDIpO1xyXG4gICAgaWYoY2xpQXJndW1lbnQubmFtZSA9PSBcImphbVwiKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoJ1RoZSBmaXJzdCBzcGVjaWZpZWQgY29tbWFuZCBhcmd1bWVudCBuYW1lIGlzIFwiamFtXCIuIFBlcmZlY3QhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlIGZpcnN0IHNwZWNpZmllZCBjb21tYW5kIGFyZ3VtZW50IG5hbWUgaXMgbm90IFwiamFtXCIuIFNvbWV0aGluZyBpcyB3cm9uZyEnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoY2xpQXJndW1lbnQyLm5hbWUgPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGUgc2Vjb25kIHNwZWNpZmllZCBjb21tYW5kIGFyZ3VtZW50IG5hbWUgaXMgXCJ1bmRlZmluZWRcIi4gUGVyZmVjdCEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGUgc2Vjb25kIHNwZWNpZmllZCBjb21tYW5kIGFyZ3VtZW50IG5hbWUgaXMgbm90IFwidW5kZWZpbmVkXCIuIFNvbWV0aGluZyBpcyB3cm9uZyEnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbn07XHJcbmdldENvbW1hbmRBcmd1bWVudFRlc3QoKTtcclxuXHJcbnZhciBnZXRDb21tYW5kQXJnc1Rlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjb21tYW5kQXJncyA9IHNtYXJ0Y2xpLmdldC5jb21tYW5kQXJncygpO1xyXG4gICAgaWYoY29tbWFuZEFyZ3NbMF0ubmFtZSA9PSBcImphbVwiKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoXCJmaXJzdCBjb21tYW5kIGFyZ3VtZW50IGlzICdqYW0nLiBQZXJmZWN0IVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKFwiZmlyc3QgY29tbWFuZCBhcmd1bWVudCBpcyBub3QgJ2phbScuIFNvbWV0aGluZyBpcyB3cm9tZyFcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coY29tbWFuZEFyZ3NbMF0ubmFtZSk7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG59O1xyXG5nZXRDb21tYW5kQXJnc1Rlc3QoKTtcclxuXHJcbnZhciBnZXRPcHRpb25UZXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY2xpT3B0aW9uID0gc21hcnRjbGkuZ2V0Lm9wdGlvbihcImF3ZXNvbWVcIik7XHJcbiAgICB2YXIgY2xpT3B0aW9uMiA9IHNtYXJ0Y2xpLmdldC5vcHRpb24oXCJ0ZXJyaWZpY1wiKTtcclxuICAgIGlmKGNsaU9wdGlvbi5zcGVjaWZpZWQpe1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKFwiYXdlc29tZSBpcyBzcGVjaWZpZWQuIFBlcmZlY3QhXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcihcImF3ZXNvbWUgaXMgbm90IHNwZWNpZmllZC4gU29tZWh0aGluZyBpcyB3cm9uZ1wiKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbiAgICBpZighY2xpT3B0aW9uMi5zcGVjaWZpZWQpe1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKFwidGVycmlmaWMgaXMgbm90IHNwZWNpZmllZC4gUGVyZmVjdCFcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKFwidGVycmlmaWMgaXMgc3BlY2lmaWVkLiBTb21laHRoaW5nIGlzIHdyb25nXCIpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxufTtcclxuZ2V0T3B0aW9uVGVzdCgpO1xyXG5cclxudmFyIGdldEN3ZFRlc3QgPSBmdW5jdGlvbigpe1xyXG4gICAgYmVhdXR5bG9nLmluZm8oJ1RoZSBjdXJyZW50IGRpcmVjdG9yeSBpczogJyArIHNtYXJ0Y2xpLmdldC5jd2QoKS5wYXRoKTtcclxufTtcclxuZ2V0Q3dkVGVzdCgpO1xyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0gSU5URVJBQ1RJT04gVEVTVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHJcbnZhciBpbnRlcmFjdGlvbkdldEFuc3dlclRlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHNtYXJ0Y2xpLmludGVyYWN0aW9uLmdldEFuc3dlcignSG93IGRvIHlvdSBmZWVsPycsZnVuY3Rpb24oYW5zd2VyKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGhlIGFuc3dlciBpczogJyArIGFuc3dlcik7XHJcbiAgICAgICAgaW50ZXJhY3Rpb25HZXRDaG9pY2VUZXN0KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5cclxudmFyIGludGVyYWN0aW9uR2V0Q2hvaWNlVGVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc21hcnRjbGkuaW50ZXJhY3Rpb24uZ2V0Q2hvaWNlKCdXaGF0IG11c2ljIGRvIHlvdSBsaWtlIHRvIGhlYXI/JyxbJ0phenonLCdCbHVlcycsJ0NsYXNzaWNhbCddLGZ1bmN0aW9uKGFuc3dlcil7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZSBhbnN3ZXIgaXM6ICcgKyBhbnN3ZXIpO1xyXG4gICAgICAgIGVuZFRlc3RzKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbnZhciBlbmRUZXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgYmVhdXR5bG9nLm9rKFwiTm8gbW9yZSB0ZXN0cyFcIik7XHJcbiAgICBiZWF1dHlsb2cuc3VjY2VzcyhcIlRlc3RzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG59O1xyXG5cclxuaWYoIXNtYXJ0Y2xpLmNoZWNrLm9wdGlvbihcInNpbGVudFwiKSl7XHJcbiAgICBpbnRlcmFjdGlvbkdldEFuc3dlclRlc3QoKTtcclxufSBlbHNlIHtcclxuICAgIGJlYXV0eWxvZy5pbmZvKFwiLS1zaWxlbnQgb3B0aW9uIGlzIHNwZWNpZmllZCwgdGh1cyB3ZSBhcmUgbm90IHJ1bm5pbmcgaW50ZXJhY3Rpb24gdGVzdHMuXCIpO1xyXG4gICAgZW5kVGVzdHMoKTtcclxufTtcclxuXHJcblxyXG5cclxuIl19
