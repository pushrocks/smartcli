/// <reference path="../ts/typings/index.d.ts" />
var smartcli = require("../dist/index.js");
var beautylog = require("beautylog");
var should = require("should");
/* ------------------------------------------------------------------ *
 * ------------------- CHECKS TESTS --------------------------------- *
 * ------------------------------------------------------------------ */
describe("smartcli", function () {
    describe(".check", function () {
        describe(".command", function () {
            it("should return true when specified command is found", function () {
                smartcli.check.command("jazz").should.be.true();
            });
            it("should return false when specified command is NOT found", function () {
                smartcli.check.command("rock").should.be.false();
            });
        });
        describe(".commandPresence", function () {
        });
    });
});
var checkCommandArgumentTest = function () {
    if (smartcli.check.commandArgument("jam", 1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgument("session", 2)) {
        beautylog.success('There is no level 2 argument with the name of "session"! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument with the name of "session"! This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentTest();
var checkCommandArgumentPresenceTest = function () {
    if (smartcli.check.commandArgumentPresence(1)) {
        beautylog.success('There is a level 1 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be no level 1 argument... This is wrong');
        process.exit(1);
    }
    if (!smartcli.check.commandArgumentPresence(2)) {
        beautylog.success('There is no level 2 argument! Perfect!');
    }
    else {
        beautylog.error('There seems to be a level 2 argument... This is wrong');
        process.exit(1);
    }
};
checkCommandArgumentPresenceTest();
/* ------------------------------------------------------------------ *
 * ------------------- GETTERS TESTS -------------------------------- *
 * ------------------------------------------------------------------ */
var getCommandTest = function () {
    var cliCommand = smartcli.get.command();
    if (cliCommand.name == "jazz") {
        beautylog.success('The specified command name is "jazz". Perfect!');
    }
    else {
        beautylog.error('The specified command name is not "jazz". Something is wrong!');
        process.exit(1);
    }
};
getCommandTest();
var getCommandArgumentTest = function () {
    var cliArgument = smartcli.get.commandArgument(1);
    var cliArgument2 = smartcli.get.commandArgument(2);
    if (cliArgument.name == "jam") {
        beautylog.success('The first specified command argument name is "jam". Perfect!');
    }
    else {
        beautylog.error('The first specified command argument name is not "jam". Something is wrong!');
        process.exit(1);
    }
    if (cliArgument2.name == "undefined") {
        beautylog.success('The second specified command argument name is "undefined". Perfect!');
    }
    else {
        beautylog.error('The second specified command argument name is not "undefined". Something is wrong!');
        process.exit(1);
    }
};
getCommandArgumentTest();
var getCommandArgsTest = function () {
    var commandArgs = smartcli.get.commandArgs();
    if (commandArgs[0].name == "jam") {
        beautylog.success("first command argument is 'jam'. Perfect!");
    }
    else {
        beautylog.error("first command argument is not 'jam'. Something is wromg!");
        console.log(commandArgs[0].name);
        process.exit(1);
    }
};
getCommandArgsTest();
var getOptionTest = function () {
    var cliOption = smartcli.get.option("awesome");
    var cliOption2 = smartcli.get.option("terrific");
    if (cliOption.specified) {
        beautylog.success("awesome is specified. Perfect!");
    }
    else {
        beautylog.error("awesome is not specified. Somehthing is wrong");
        process.exit(1);
    }
    if (!cliOption2.specified) {
        beautylog.success("terrific is not specified. Perfect!");
    }
    else {
        beautylog.error("terrific is specified. Somehthing is wrong");
        process.exit(1);
    }
};
getOptionTest();
var getCwdTest = function () {
    beautylog.info('The current directory is: ' + smartcli.get.cwd().path);
};
getCwdTest();
/* ------------------------------------------------------------------ *
 * ------------------- INTERACTION TESTS ---------------------------- *
 * ------------------------------------------------------------------ */
var interactionGetAnswerTest = function () {
    smartcli.interaction.getAnswer('How do you feel?', function (answer) {
        console.log('The answer is: ' + answer);
        interactionGetChoiceTest();
    });
};
var interactionGetChoiceTest = function () {
    smartcli.interaction.getChoice('What music do you like to hear?', ['Jazz', 'Blues', 'Classical'], function (answer) {
        console.log('The answer is: ' + answer);
        endTests();
    });
};
var endTests = function () {
    beautylog.ok("No more tests!");
    beautylog.success("Tests completed successfully!");
};
if (!smartcli.check.option("silent")) {
    interactionGetAnswerTest();
}
else {
    beautylog.info("--silent option is specified, thus we are not running interaction tests.");
    endTests();
}
;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUMsQ0FBQztJQUMvQixTQUFTLENBQUMsT0FBTyxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDdkQsQ0FBQyxDQUFDO0FBRUYsRUFBRSxDQUFBLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBLENBQUM7SUFDakMsd0JBQXdCLEVBQUUsQ0FBQztBQUMvQixDQUFDO0FBQUMsSUFBSSxDQUFDLENBQUM7SUFDSixTQUFTLENBQUMsSUFBSSxDQUFDLDBFQUEwRSxDQUFDLENBQUM7SUFDM0YsUUFBUSxFQUFFLENBQUM7QUFDZixDQUFDO0FBQUEsQ0FBQyIsImZpbGUiOiJ0ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3RzL3R5cGluZ3MvaW5kZXguZC50c1wiIC8+XHJcbmxldCBzbWFydGNsaSA9IHJlcXVpcmUoXCIuLi9kaXN0L2luZGV4LmpzXCIpO1xyXG5sZXQgYmVhdXR5bG9nID0gcmVxdWlyZShcImJlYXV0eWxvZ1wiKTtcclxubGV0IHNob3VsZCA9IHJlcXVpcmUoXCJzaG91bGRcIik7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tIENIRUNLUyBURVNUUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmRlc2NyaWJlKFwic21hcnRjbGlcIixmdW5jdGlvbigpe1xyXG4gICAgZGVzY3JpYmUoXCIuY2hlY2tcIixmdW5jdGlvbigpe1xyXG4gICAgICAgIGRlc2NyaWJlKFwiLmNvbW1hbmRcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHNwZWNpZmllZCBjb21tYW5kIGlzIGZvdW5kXCIsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmQoXCJqYXp6XCIpLnNob3VsZC5iZS50cnVlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gZmFsc2Ugd2hlbiBzcGVjaWZpZWQgY29tbWFuZCBpcyBOT1QgZm91bmRcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgc21hcnRjbGkuY2hlY2suY29tbWFuZChcInJvY2tcIikuc2hvdWxkLmJlLmZhbHNlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyBcclxuICAgICAgICBkZXNjcmliZShcIi5jb21tYW5kUHJlc2VuY2VcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbnZhciBjaGVja0NvbW1hbmRBcmd1bWVudFRlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmIChzbWFydGNsaS5jaGVjay5jb21tYW5kQXJndW1lbnQoXCJqYW1cIiwxKSkge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGVyZSBpcyBhIGxldmVsIDEgYXJndW1lbnQhIFBlcmZlY3QhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlcmUgc2VlbXMgdG8gYmUgbm8gbGV2ZWwgMSBhcmd1bWVudC4uLiBUaGlzIGlzIHdyb25nJyk7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFzbWFydGNsaS5jaGVjay5jb21tYW5kQXJndW1lbnQoXCJzZXNzaW9uXCIsMikpIHtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlcmUgaXMgbm8gbGV2ZWwgMiBhcmd1bWVudCB3aXRoIHRoZSBuYW1lIG9mIFwic2Vzc2lvblwiISBQZXJmZWN0IScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZXJlIHNlZW1zIHRvIGJlIGEgbGV2ZWwgMiBhcmd1bWVudCB3aXRoIHRoZSBuYW1lIG9mIFwic2Vzc2lvblwiISBUaGlzIGlzIHdyb25nJyk7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG59O1xyXG5jaGVja0NvbW1hbmRBcmd1bWVudFRlc3QoKTtcclxuXHJcbnZhciBjaGVja0NvbW1hbmRBcmd1bWVudFByZXNlbmNlVGVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudFByZXNlbmNlKDEpKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoJ1RoZXJlIGlzIGEgbGV2ZWwgMSBhcmd1bWVudCEgUGVyZmVjdCEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGVyZSBzZWVtcyB0byBiZSBubyBsZXZlbCAxIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXNtYXJ0Y2xpLmNoZWNrLmNvbW1hbmRBcmd1bWVudFByZXNlbmNlKDIpKSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLnN1Y2Nlc3MoJ1RoZXJlIGlzIG5vIGxldmVsIDIgYXJndW1lbnQhIFBlcmZlY3QhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlcmUgc2VlbXMgdG8gYmUgYSBsZXZlbCAyIGFyZ3VtZW50Li4uIFRoaXMgaXMgd3JvbmcnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbn07XHJcbmNoZWNrQ29tbWFuZEFyZ3VtZW50UHJlc2VuY2VUZXN0KCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tIEdFVFRFUlMgVEVTVFMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGdldENvbW1hbmRUZXN0ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBjbGlDb21tYW5kID0gc21hcnRjbGkuZ2V0LmNvbW1hbmQoKTtcclxuICAgIGlmKGNsaUNvbW1hbmQubmFtZSA9PSBcImphenpcIikge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGUgc3BlY2lmaWVkIGNvbW1hbmQgbmFtZSBpcyBcImphenpcIi4gUGVyZmVjdCEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmVhdXR5bG9nLmVycm9yKCdUaGUgc3BlY2lmaWVkIGNvbW1hbmQgbmFtZSBpcyBub3QgXCJqYXp6XCIuIFNvbWV0aGluZyBpcyB3cm9uZyEnKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5nZXRDb21tYW5kVGVzdCgpO1xyXG5cclxudmFyIGdldENvbW1hbmRBcmd1bWVudFRlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjbGlBcmd1bWVudCA9IHNtYXJ0Y2xpLmdldC5jb21tYW5kQXJndW1lbnQoMSk7XHJcbiAgICB2YXIgY2xpQXJndW1lbnQyID0gc21hcnRjbGkuZ2V0LmNvbW1hbmRBcmd1bWVudCgyKTtcclxuICAgIGlmKGNsaUFyZ3VtZW50Lm5hbWUgPT0gXCJqYW1cIikge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKCdUaGUgZmlyc3Qgc3BlY2lmaWVkIGNvbW1hbmQgYXJndW1lbnQgbmFtZSBpcyBcImphbVwiLiBQZXJmZWN0IScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoJ1RoZSBmaXJzdCBzcGVjaWZpZWQgY29tbWFuZCBhcmd1bWVudCBuYW1lIGlzIG5vdCBcImphbVwiLiBTb21ldGhpbmcgaXMgd3JvbmchJyk7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGNsaUFyZ3VtZW50Mi5uYW1lID09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcygnVGhlIHNlY29uZCBzcGVjaWZpZWQgY29tbWFuZCBhcmd1bWVudCBuYW1lIGlzIFwidW5kZWZpbmVkXCIuIFBlcmZlY3QhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcignVGhlIHNlY29uZCBzcGVjaWZpZWQgY29tbWFuZCBhcmd1bWVudCBuYW1lIGlzIG5vdCBcInVuZGVmaW5lZFwiLiBTb21ldGhpbmcgaXMgd3JvbmchJyk7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG59O1xyXG5nZXRDb21tYW5kQXJndW1lbnRUZXN0KCk7XHJcblxyXG52YXIgZ2V0Q29tbWFuZEFyZ3NUZXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY29tbWFuZEFyZ3MgPSBzbWFydGNsaS5nZXQuY29tbWFuZEFyZ3MoKTtcclxuICAgIGlmKGNvbW1hbmRBcmdzWzBdLm5hbWUgPT0gXCJqYW1cIikge1xyXG4gICAgICAgIGJlYXV0eWxvZy5zdWNjZXNzKFwiZmlyc3QgY29tbWFuZCBhcmd1bWVudCBpcyAnamFtJy4gUGVyZmVjdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcihcImZpcnN0IGNvbW1hbmQgYXJndW1lbnQgaXMgbm90ICdqYW0nLiBTb21ldGhpbmcgaXMgd3JvbWchXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbW1hbmRBcmdzWzBdLm5hbWUpO1xyXG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcclxuICAgIH1cclxufTtcclxuZ2V0Q29tbWFuZEFyZ3NUZXN0KCk7XHJcblxyXG52YXIgZ2V0T3B0aW9uVGVzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGNsaU9wdGlvbiA9IHNtYXJ0Y2xpLmdldC5vcHRpb24oXCJhd2Vzb21lXCIpO1xyXG4gICAgdmFyIGNsaU9wdGlvbjIgPSBzbWFydGNsaS5nZXQub3B0aW9uKFwidGVycmlmaWNcIik7XHJcbiAgICBpZihjbGlPcHRpb24uc3BlY2lmaWVkKXtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcyhcImF3ZXNvbWUgaXMgc3BlY2lmaWVkLiBQZXJmZWN0IVwiKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBiZWF1dHlsb2cuZXJyb3IoXCJhd2Vzb21lIGlzIG5vdCBzcGVjaWZpZWQuIFNvbWVodGhpbmcgaXMgd3JvbmdcIik7XHJcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gICAgfVxyXG4gICAgaWYoIWNsaU9wdGlvbjIuc3BlY2lmaWVkKXtcclxuICAgICAgICBiZWF1dHlsb2cuc3VjY2VzcyhcInRlcnJpZmljIGlzIG5vdCBzcGVjaWZpZWQuIFBlcmZlY3QhXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJlYXV0eWxvZy5lcnJvcihcInRlcnJpZmljIGlzIHNwZWNpZmllZC4gU29tZWh0aGluZyBpcyB3cm9uZ1wiKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICB9XHJcbn07XHJcbmdldE9wdGlvblRlc3QoKTtcclxuXHJcbnZhciBnZXRDd2RUZXN0ID0gZnVuY3Rpb24oKXtcclxuICAgIGJlYXV0eWxvZy5pbmZvKCdUaGUgY3VycmVudCBkaXJlY3RvcnkgaXM6ICcgKyBzbWFydGNsaS5nZXQuY3dkKCkucGF0aCk7XHJcbn07XHJcbmdldEN3ZFRlc3QoKTtcclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tIElOVEVSQUNUSU9OIFRFU1RTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG52YXIgaW50ZXJhY3Rpb25HZXRBbnN3ZXJUZXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzbWFydGNsaS5pbnRlcmFjdGlvbi5nZXRBbnN3ZXIoJ0hvdyBkbyB5b3UgZmVlbD8nLGZ1bmN0aW9uKGFuc3dlcil7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoZSBhbnN3ZXIgaXM6ICcgKyBhbnN3ZXIpO1xyXG4gICAgICAgIGludGVyYWN0aW9uR2V0Q2hvaWNlVGVzdCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbnZhciBpbnRlcmFjdGlvbkdldENob2ljZVRlc3QgPSBmdW5jdGlvbigpIHtcclxuICAgIHNtYXJ0Y2xpLmludGVyYWN0aW9uLmdldENob2ljZSgnV2hhdCBtdXNpYyBkbyB5b3UgbGlrZSB0byBoZWFyPycsWydKYXp6JywnQmx1ZXMnLCdDbGFzc2ljYWwnXSxmdW5jdGlvbihhbnN3ZXIpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGUgYW5zd2VyIGlzOiAnICsgYW5zd2VyKTtcclxuICAgICAgICBlbmRUZXN0cygpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG52YXIgZW5kVGVzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgIGJlYXV0eWxvZy5vayhcIk5vIG1vcmUgdGVzdHMhXCIpO1xyXG4gICAgYmVhdXR5bG9nLnN1Y2Nlc3MoXCJUZXN0cyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxufTtcclxuXHJcbmlmKCFzbWFydGNsaS5jaGVjay5vcHRpb24oXCJzaWxlbnRcIikpe1xyXG4gICAgaW50ZXJhY3Rpb25HZXRBbnN3ZXJUZXN0KCk7XHJcbn0gZWxzZSB7XHJcbiAgICBiZWF1dHlsb2cuaW5mbyhcIi0tc2lsZW50IG9wdGlvbiBpcyBzcGVjaWZpZWQsIHRodXMgd2UgYXJlIG5vdCBydW5uaW5nIGludGVyYWN0aW9uIHRlc3RzLlwiKTtcclxuICAgIGVuZFRlc3RzKCk7XHJcbn07XHJcblxyXG5cclxuXHJcbiJdfQ==
